/**
 * Email Service usando Nodemailer
 * Envia emails transacionais lindos e personalizados (boas-vindas, recupera√ß√£o de senha, notifica√ß√µes)
 */

const nodemailer = require('nodemailer')

// Configura√ß√µes SMTP do Gmail
const SMTP_CONFIG = {
  host: process.env.SMTP_HOST || 'smtp.gmail.com',
  port: parseInt(process.env.SMTP_PORT || '587'),
  secure: false, // true para 465, false para outras portas
  auth: {
    user: process.env.SMTP_EMAIL || 'suporte@mecabr.com',
    pass: process.env.SMTP_PASSWORD || 'yqgt ctvh jppd idnd'
  }
}

// URLs p√∫blicas (ajustar conforme necess√°rio)
const LOGO_URL = 'https://i.imgur.com/mecabr-logo.png' // TODO: Hospedar logo
const APP_URL = 'http://ec2-3-144-213-137.us-east-2.compute.amazonaws.com:9000'

interface EmailOptions {
  to: string | string[]
  subject: string
  html: string
  text?: string
}

/**
 * Template base para todos os emails
 */
function getBaseTemplate(content: string): string {
  return `
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MECA - Sua Oficina na Palma da M√£o</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6; 
      color: #1F2937;
      background: #F3F4F6;
      padding: 20px;
    }
    .email-wrapper {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    .header {
      background: linear-gradient(135deg, #22C55E 0%, #16A34A 100%);
      padding: 40px 30px;
      text-align: center;
      position: relative;
    }
    .header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 20px;
      background: white;
      border-radius: 20px 20px 0 0;
    }
    .logo-container {
      background: white;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .logo {
      font-size: 48px;
      font-weight: bold;
      color: #22C55E;
    }
    .header h1 {
      color: white;
      font-size: 28px;
      margin: 0;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .content {
      padding: 40px 30px;
    }
    .content p {
      margin-bottom: 16px;
      color: #4B5563;
      font-size: 16px;
    }
    .content strong {
      color: #1F2937;
    }
    .highlight-box {
      background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
      border-left: 4px solid #22C55E;
      border-radius: 8px;
      padding: 20px;
      margin: 24px 0;
    }
    .info-box {
      background: #F9FAFB;
      border: 2px solid #E5E7EB;
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
    }
    .info-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid #E5E7EB;
    }
    .info-row:last-child {
      border-bottom: none;
    }
    .info-label {
      font-weight: 600;
      color: #6B7280;
    }
    .info-value {
      color: #1F2937;
      font-weight: 500;
    }
    .button {
      display: inline-block;
      background: linear-gradient(135deg, #22C55E 0%, #16A34A 100%);
      color: white !important;
      padding: 16px 40px;
      text-decoration: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 16px;
      margin: 24px 0;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
      transition: all 0.3s;
    }
    .button:hover {
      box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
      transform: translateY(-2px);
    }
    .button-center {
      text-align: center;
    }
    .code-box {
      background: linear-gradient(135deg, #1F2937 0%, #111827 100%);
      color: #22C55E;
      padding: 20px;
      border-radius: 12px;
      font-family: 'Courier New', monospace;
      font-size: 32px;
      font-weight: bold;
      text-align: center;
      letter-spacing: 8px;
      margin: 24px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .feature-list {
      list-style: none;
      padding: 0;
    }
    .feature-list li {
      padding: 12px 0;
      padding-left: 36px;
      position: relative;
      color: #4B5563;
    }
    .feature-list li:before {
      content: '‚úì';
      position: absolute;
      left: 0;
      top: 12px;
      background: #22C55E;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }
    .alert-box {
      background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
      border-left: 4px solid #F59E0B;
      border-radius: 8px;
      padding: 20px;
      margin: 24px 0;
    }
    .alert-box strong {
      color: #92400E;
    }
    .alert-box p {
      margin-bottom: 0;
      color: #78350F;
    }
    .danger-box {
      background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%);
      border-left: 4px solid #EF4444;
      border-radius: 8px;
      padding: 20px;
      margin: 24px 0;
    }
    .danger-box strong {
      color: #991B1B;
    }
    .danger-box p {
      margin-bottom: 0;
      color: #7F1D1D;
    }
    .footer {
      background: #F9FAFB;
      padding: 30px;
      text-align: center;
      border-top: 1px solid #E5E7EB;
    }
    .footer-logo {
      font-size: 24px;
      font-weight: bold;
      color: #22C55E;
      margin-bottom: 12px;
    }
    .footer p {
      color: #6B7280;
      font-size: 14px;
      margin: 8px 0;
    }
    .footer-links {
      margin: 16px 0;
    }
    .footer-links a {
      color: #22C55E;
      text-decoration: none;
      margin: 0 12px;
      font-size: 14px;
    }
    .social-icons {
      margin: 16px 0;
    }
    .social-icon {
      display: inline-block;
      width: 36px;
      height: 36px;
      background: #E5E7EB;
      border-radius: 50%;
      margin: 0 6px;
      line-height: 36px;
      text-decoration: none;
      color: #6B7280;
      font-weight: bold;
    }
    @media only screen and (max-width: 600px) {
      .email-wrapper { border-radius: 0; }
      .header, .content, .footer { padding: 24px 20px; }
      .header h1 { font-size: 24px; }
      .code-box { font-size: 24px; letter-spacing: 4px; }
    }
  </style>
</head>
<body>
  <div class="email-wrapper">
    ${content}
    <div class="footer">
      <div class="footer-logo">üîß MECA</div>
      <p><strong>Sua Oficina na Palma da M√£o</strong></p>
      <p>¬© ${new Date().getFullYear()} MECA - Todos os direitos reservados</p>
      <div class="footer-links">
        <a href="${APP_URL}">Site</a> ‚Ä¢
        <a href="mailto:contato@mecabr.com">Contato</a> ‚Ä¢
        <a href="${APP_URL}/termos">Termos</a> ‚Ä¢
        <a href="${APP_URL}/privacidade">Privacidade</a>
      </div>
      <p style="margin-top: 16px;">
        üìß <a href="mailto:contato@mecabr.com" style="color: #22C55E;">contato@mecabr.com</a><br>
        üì± WhatsApp: (61) 99999-9999
      </p>
    </div>
  </div>
</body>
</html>
`
}

export class EmailService {
  private static transporter = nodemailer.createTransporter(SMTP_CONFIG)

  /**
   * Verifica conex√£o SMTP
   */
  static async verifyConnection(): Promise<boolean> {
    try {
      await this.transporter.verify()
      console.log('‚úÖ Conex√£o SMTP verificada com sucesso')
      return true
    } catch (error) {
      console.error('‚ùå Erro na conex√£o SMTP:', error)
      return false
    }
  }

  /**
   * Envia um email
   */
  static async sendEmail(options: EmailOptions): Promise<boolean> {
    try {
      const info = await this.transporter.sendMail({
        from: `"MECA - Sua Oficina na Palma da M√£o" <${SMTP_CONFIG.auth.user}>`,
        to: Array.isArray(options.to) ? options.to.join(', ') : options.to,
        subject: options.subject,
        text: options.text || '',
        html: options.html
      })

      console.log('‚úÖ Email enviado:', info.messageId, 'para:', options.to)
      return true
    } catch (error) {
      console.error('‚ùå Erro ao enviar email:', error)
      return false
    }
  }

  /**
   * Email de boas-vindas para cliente
   */
  static async sendWelcomeCustomer(email: string, name: string): Promise<boolean> {
    const content = `
    <div class="header">
      <div class="logo-container">
        <div class="logo">üîß</div>
      </div>
      <h1>üéâ Bem-vindo ao MECA!</h1>
    </div>
    <div class="content">
      <p>Ol√° <strong>${name}</strong>,</p>
      
      <div class="highlight-box">
        <p style="margin: 0;"><strong>üéä Parab√©ns!</strong> Sua conta foi criada com sucesso. Agora voc√™ faz parte da maior plataforma de servi√ßos automotivos do Brasil!</p>
      </div>
      
      <p>Com o <strong>MECA</strong> voc√™ tem acesso a:</p>
      
      <ul class="feature-list">
        <li><strong>Oficinas Verificadas</strong> - Encontre as melhores oficinas da sua regi√£o</li>
        <li><strong>Agendamento F√°cil</strong> - Agende servi√ßos em poucos cliques</li>
        <li><strong>Hist√≥rico Completo</strong> - Acompanhe todo o hist√≥rico do seu ve√≠culo</li>
        <li><strong>Avalia√ß√µes Reais</strong> - Confira avalia√ß√µes de outros clientes</li>
        <li><strong>Pagamento Seguro</strong> - Pague direto pelo app com seguran√ßa</li>
      </ul>
      
      <div class="button-center">
        <a href="${APP_URL}" class="button">üöÄ Come√ßar a Usar Agora</a>
      </div>
      
      <p style="margin-top: 24px;">Se voc√™ tiver qualquer d√∫vida, nossa equipe est√° sempre pronta para ajudar! Basta responder este email ou entrar em contato pelo WhatsApp.</p>
      
      <p style="font-size: 18px; margin-top: 32px;"><strong>Bem-vindo √† fam√≠lia MECA! üöóüíö</strong></p>
      
      <p>Abra√ßos,<br><strong>Equipe MECA</strong></p>
    </div>
`

    return this.sendEmail({
      to: email,
      subject: 'üéâ Bem-vindo ao MECA - Sua Oficina na Palma da M√£o!',
      html: getBaseTemplate(content),
      text: `Ol√° ${name}, bem-vindo ao MECA! Sua conta foi criada com sucesso. Comece a usar agora: ${APP_URL}`
    })
  }

  /**
   * Email de boas-vindas para oficina
   */
  static async sendWelcomeWorkshop(email: string, name: string): Promise<boolean> {
    const content = `
    <div class="header">
      <div class="logo-container">
        <div class="logo">üîß</div>
      </div>
      <h1>üèÜ Bem-vindo ao MECA Oficina!</h1>
    </div>
    <div class="content">
      <p>Ol√° <strong>${name}</strong>,</p>
      
      <div class="highlight-box">
        <p style="margin: 0;"><strong>üéä Parab√©ns!</strong> Sua oficina foi cadastrada com sucesso na plataforma MECA!</p>
      </div>
      
      <div class="alert-box">
        <p><strong>‚è≥ Aguardando Aprova√ß√£o</strong></p>
        <p>Sua conta est√° em an√°lise pela nossa equipe. Verificaremos seus dados e voc√™ receber√° um email assim que for aprovada. Este processo geralmente leva at√© 24 horas.</p>
      </div>
      
      <p><strong>Ap√≥s a aprova√ß√£o, voc√™ poder√°:</strong></p>
      
      <ul class="feature-list">
        <li><strong>Receber Agendamentos</strong> - Clientes pr√≥ximos encontrar√£o sua oficina</li>
        <li><strong>Gerenciar Agenda</strong> - Organize seus hor√°rios e servi√ßos</li>
        <li><strong>Hist√≥rico Completo</strong> - Acompanhe todos os atendimentos</li>
        <li><strong>Receber Pagamentos</strong> - Pagamentos seguros direto na plataforma</li>
        <li><strong>Aumentar Visibilidade</strong> - Seja encontrado por mais clientes</li>
      </ul>
      
      <div class="info-box">
        <h3 style="margin-top: 0; color: #22C55E;">üì± Pr√≥ximos Passos</h3>
        <p style="margin-bottom: 12px;">Enquanto aguarda a aprova√ß√£o:</p>
        <ol style="margin-left: 20px; color: #4B5563;">
          <li style="margin-bottom: 8px;">Baixe o aplicativo MECA Oficina</li>
          <li style="margin-bottom: 8px;">Prepare fotos da sua oficina</li>
          <li style="margin-bottom: 8px;">Liste os servi√ßos que voc√™ oferece</li>
          <li>Defina seus hor√°rios de atendimento</li>
        </ol>
      </div>
      
      <p style="font-size: 18px; margin-top: 32px;"><strong>Estamos ansiosos para t√™-lo como parceiro! ü§ù</strong></p>
      
      <p>Abra√ßos,<br><strong>Equipe MECA</strong></p>
    </div>
`

    return this.sendEmail({
      to: email,
      subject: 'üèÜ Bem-vindo ao MECA Oficina - Cadastro Realizado!',
      html: getBaseTemplate(content),
      text: `Ol√° ${name}, sua oficina foi cadastrada com sucesso no MECA! Aguarde a aprova√ß√£o da nossa equipe.`
    })
  }

  /**
   * Email de recupera√ß√£o de senha
   */
  static async sendPasswordReset(email: string, name: string, resetToken: string, userType: 'customer' | 'workshop'): Promise<boolean> {
    const resetUrl = `${APP_URL}/auth/${userType}/reset-password?token=${resetToken}`
    
    const content = `
    <div class="header">
      <div class="logo-container">
        <div class="logo">üîß</div>
      </div>
      <h1>üîê Recupera√ß√£o de Senha</h1>
    </div>
    <div class="content">
      <p>Ol√° <strong>${name}</strong>,</p>
      
      <p>Recebemos uma solicita√ß√£o para redefinir a senha da sua conta <strong>MECA</strong>.</p>
      
      <div class="danger-box">
        <p><strong>‚ö†Ô∏è Seguran√ßa em Primeiro Lugar</strong></p>
        <p>Se voc√™ <strong>N√ÉO</strong> solicitou a redefini√ß√£o de senha, <strong>ignore este email</strong>. Sua conta permanecer√° segura e nenhuma altera√ß√£o ser√° feita.</p>
      </div>
      
      <p><strong>Para criar uma nova senha, use o c√≥digo abaixo:</strong></p>
      
      <div class="code-box">${resetToken}</div>
      
      <p style="text-align: center; color: #EF4444; font-weight: 600;">‚è∞ Este c√≥digo expira em 1 hora</p>
      
      <div class="button-center">
        <a href="${resetUrl}" class="button">üîë Redefinir Senha Agora</a>
      </div>
      
      <div class="info-box">
        <h3 style="margin-top: 0; color: #6B7280;">üì± Como usar no app:</h3>
        <ol style="margin-left: 20px; color: #4B5563;">
          <li style="margin-bottom: 8px;">Abra o app MECA</li>
          <li style="margin-bottom: 8px;">V√° em "Esqueci minha senha"</li>
          <li style="margin-bottom: 8px;">Digite o c√≥digo: <strong>${resetToken}</strong></li>
          <li>Crie sua nova senha</li>
        </ol>
      </div>
      
      <p>Se voc√™ tiver problemas ou n√£o solicitou esta redefini√ß√£o, entre em contato conosco imediatamente.</p>
      
      <p>Abra√ßos,<br><strong>Equipe MECA</strong></p>
    </div>
`

    return this.sendEmail({
      to: email,
      subject: 'üîê Recupera√ß√£o de Senha - MECA',
      html: getBaseTemplate(content),
      text: `Ol√° ${name}, use este c√≥digo para redefinir sua senha no MECA: ${resetToken}. O c√≥digo expira em 1 hora.`
    })
  }

  /**
   * Email de agendamento confirmado
   */
  static async sendBookingConfirmed(
    customerEmail: string,
    customerName: string,
    workshopName: string,
    serviceTitle: string,
    scheduledDate: Date
  ): Promise<boolean> {
    const dateStr = scheduledDate.toLocaleDateString('pt-BR', { 
      weekday: 'long',
      day: '2-digit', 
      month: 'long', 
      year: 'numeric'
    })
    
    const timeStr = scheduledDate.toLocaleTimeString('pt-BR', {
      hour: '2-digit',
      minute: '2-digit'
    })
    
    const content = `
    <div class="header">
      <div class="logo-container">
        <div class="logo">üîß</div>
      </div>
      <h1>‚úÖ Agendamento Confirmado!</h1>
    </div>
    <div class="content">
      <p>Ol√° <strong>${customerName}</strong>,</p>
      
      <div class="highlight-box">
        <p style="margin: 0; font-size: 18px;"><strong>üéâ √ìtimas not√≠cias!</strong> Seu agendamento foi <strong style="color: #22C55E;">confirmado</strong> pela oficina!</p>
      </div>
      
      <div class="info-box">
        <h3 style="margin-top: 0; color: #22C55E; text-align: center;">üìã Detalhes do Agendamento</h3>
        <div class="info-row">
          <span class="info-label">üè¢ Oficina:</span>
          <span class="info-value">${workshopName}</span>
        </div>
        <div class="info-row">
          <span class="info-label">üîß Servi√ßo:</span>
          <span class="info-value">${serviceTitle}</span>
        </div>
        <div class="info-row">
          <span class="info-label">üìÖ Data:</span>
          <span class="info-value">${dateStr}</span>
        </div>
        <div class="info-row">
          <span class="info-label">üïê Hor√°rio:</span>
          <span class="info-value">${timeStr}</span>
        </div>
      </div>
      
      <div class="alert-box">
        <p><strong>‚è∞ Dicas Importantes:</strong></p>
        <ul style="margin: 12px 0 0 20px; color: #78350F;">
          <li>Chegue com 10 minutos de anteced√™ncia</li>
          <li>Leve os documentos do ve√≠culo</li>
          <li>Confira o endere√ßo da oficina no app</li>
        </ul>
      </div>
      
      <p>Se precisar <strong>cancelar ou remarcar</strong>, fa√ßa isso com anteced√™ncia pelo aplicativo para n√£o prejudicar a oficina.</p>
      
      <div class="button-center">
        <a href="${APP_URL}" class="button">üì± Abrir no App</a>
      </div>
      
      <p style="font-size: 18px; margin-top: 32px; text-align: center;"><strong>Bom atendimento! üöó‚ú®</strong></p>
      
      <p>Abra√ßos,<br><strong>Equipe MECA</strong></p>
    </div>
`

    return this.sendEmail({
      to: customerEmail,
      subject: `‚úÖ Agendamento Confirmado - ${workshopName}`,
      html: getBaseTemplate(content),
      text: `Ol√° ${customerName}, seu agendamento em ${workshopName} para ${serviceTitle} foi confirmado para ${dateStr} √†s ${timeStr}.`
    })
  }

  /**
   * Email de agendamento recusado
   */
  static async sendBookingRejected(
    customerEmail: string,
    customerName: string,
    workshopName: string,
    serviceTitle: string,
    reason?: string
  ): Promise<boolean> {
    const content = `
    <div class="header" style="background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);">
      <div class="logo-container">
        <div class="logo" style="color: #EF4444;">üîß</div>
      </div>
      <h1>üòî Agendamento N√£o Confirmado</h1>
    </div>
    <div class="content">
      <p>Ol√° <strong>${customerName}</strong>,</p>
      
      <div class="danger-box">
        <p style="margin: 0; font-size: 16px;"><strong>Infelizmente</strong>, a oficina <strong>${workshopName}</strong> n√£o p√¥de confirmar seu agendamento para <strong>${serviceTitle}</strong>.</p>
      </div>
      
      ${reason ? `
      <div class="info-box">
        <h3 style="margin-top: 0; color: #EF4444;">üìù Motivo informado pela oficina:</h3>
        <p style="margin-bottom: 0; font-style: italic; color: #1F2937;">"${reason}"</p>
      </div>
      ` : ''}
      
      <p><strong>Mas n√£o se preocupe!</strong> Voc√™ tem outras op√ß√µes:</p>
      
      <ul class="feature-list">
        <li>Tentar agendar em outro hor√°rio nesta mesma oficina</li>
        <li>Buscar outras oficinas dispon√≠veis na sua regi√£o</li>
        <li>Entrar em contato direto com a oficina para negociar</li>
        <li>Verificar oficinas com avalia√ß√µes excelentes perto de voc√™</li>
      </ul>
      
      <div class="button-center">
        <a href="${APP_URL}" class="button" style="background: linear-gradient(135deg, #22C55E 0%, #16A34A 100%);">üîç Buscar Outras Oficinas</a>
      </div>
      
      <p style="margin-top: 24px;">Temos certeza que voc√™ encontrar√° a oficina perfeita para suas necessidades!</p>
      
      <p>Se precisar de ajuda, estamos aqui! üíö</p>
      
      <p>Abra√ßos,<br><strong>Equipe MECA</strong></p>
    </div>
`

    return this.sendEmail({
      to: customerEmail,
      subject: `üòî Agendamento N√£o Confirmado - ${workshopName}`,
      html: getBaseTemplate(content),
      text: `Ol√° ${customerName}, infelizmente seu agendamento em ${workshopName} n√£o foi confirmado. ${reason ? `Motivo: ${reason}. ` : ''}Busque outras oficinas em: ${APP_URL}`
    })
  }

  /**
   * Email de oficina aprovada
   */
  static async sendWorkshopApproved(email: string, name: string): Promise<boolean> {
    const content = `
    <div class="header">
      <div class="logo-container">
        <div class="logo">üîß</div>
      </div>
      <h1>üéâ Oficina Aprovada!</h1>
    </div>
    <div class="content">
      <p>Ol√° <strong>${name}</strong>,</p>
      
      <div class="highlight-box">
        <p style="margin: 0; font-size: 20px; text-align: center;">
          <strong>üéä PARAB√âNS! üéä</strong><br>
          <span style="font-size: 18px; margin-top: 12px; display: block;">Sua oficina foi <strong style="color: #22C55E;">APROVADA</strong> e agora est√° <strong style="color: #22C55E;">ATIVA</strong> na plataforma MECA!</span>
        </p>
      </div>
      
      <p style="font-size: 18px; text-align: center; margin: 32px 0;"><strong>üöÄ Voc√™ j√° pode come√ßar a receber clientes!</strong></p>
      
      <div class="info-box">
        <h3 style="margin-top: 0; color: #22C55E; text-align: center;">‚ú® O que voc√™ j√° pode fazer:</h3>
        <ul class="feature-list">
          <li><strong>Receber Agendamentos</strong> - Clientes j√° podem encontrar sua oficina</li>
          <li><strong>Gerenciar Agenda</strong> - Configure seus hor√°rios e disponibilidade</li>
          <li><strong>Cadastrar Servi√ßos</strong> - Adicione servi√ßos e defina pre√ßos</li>
          <li><strong>Receber Pagamentos</strong> - Sistema seguro de pagamentos integrado</li>
          <li><strong>Aumentar Faturamento</strong> - Alcance mais clientes na sua regi√£o</li>
        </ul>
      </div>
      
      <div class="button-center">
        <a href="${APP_URL}" class="button">üöÄ Acessar Painel Agora</a>
      </div>
      
      <div class="alert-box">
        <p><strong>üí° Dica de Sucesso:</strong></p>
        <p>Complete seu perfil com fotos profissionais, liste todos os seus servi√ßos e mantenha seus hor√°rios sempre atualizados. Oficinas com perfis completos recebem at√© 3x mais agendamentos!</p>
      </div>
      
      <p style="font-size: 20px; margin-top: 32px; text-align: center;"><strong>Bem-vindo √† fam√≠lia MECA! ü§ùüíö</strong></p>
      
      <p style="text-align: center;">Estamos felizes em t√™-lo como parceiro.<br><strong>Vamos crescer juntos! üöÄ</strong></p>
      
      <p>Abra√ßos,<br><strong>Equipe MECA</strong></p>
    </div>
`

    return this.sendEmail({
      to: email,
      subject: 'üéâ Parab√©ns! Sua Oficina Foi Aprovada - MECA',
      html: getBaseTemplate(content),
      text: `Ol√° ${name}, parab√©ns! Sua oficina foi aprovada e j√° est√° ativa na plataforma MECA. Acesse: ${APP_URL}`
    })
  }
}
